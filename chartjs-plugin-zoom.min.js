/*!
 * chartjs-plugin-zoom
 * http://chartjs.org/
 * Version: 0.6.3
 *
 * Copyright 2016 Evert Timberg
 * Released under the MIT license
 * https://github.com/chartjs/chartjs-plugin-zoom/blob/master/LICENSE.md
 */
!function e(o,t,n){function a(r,l){if(!t[r]){if(!o[r]){var m="function"==typeof require&&require;if(!l&&m)return m(r,!0);if(i)return i(r,!0);var s=new Error("Cannot find module '"+r+"'");throw s.code="MODULE_NOT_FOUND",s}var c=t[r]={exports:{}};o[r][0].call(c.exports,function(e){var t=o[r][1][e];return a(t?t:e)},c,c.exports,e,o,t,n)}return t[r].exports}for(var i="function"==typeof require&&require,r=0;r<n.length;r++)a(n[r]);return a}({1:[function(e,o,t){},{}],2:[function(e,o,t){function n(e,o){return void 0===e||"string"==typeof e&&e.indexOf(o)!==-1}function a(e,o){if(e.scaleAxes&&e.rangeMax&&!y.isNullOrUndef(e.rangeMax[e.scaleAxes])){var t=e.rangeMax[e.scaleAxes];o>t&&(o=t)}return o}function i(e,o){if(e.scaleAxes&&e.rangeMin&&!y.isNullOrUndef(e.rangeMin[e.scaleAxes])){var t=e.rangeMin[e.scaleAxes];o<t&&(o=t)}return o}function r(e,o,t,n){var r=e.minIndex,l=e.maxIndex,m=l-r,s=m*(o-1),c=e.isHorizontal()?t.x:t.y,u=(e.getValueForPixel(c)-r)/m,d=1-u,f=Math.round(s*u),v=Math.round(s*d),p=e.chart.data.labels;e.options.ticks.min=i(n,p[r+f]),e.options.ticks.max=a(n,p[l-v])}function l(e,o,t,n){var r,l,m=e.options;e.isHorizontal()?(r=e.right-e.left,l=(t.x-e.left)/r):(r=e.bottom-e.top,l=(t.y-e.top)/r);var s=1-l,c=r*(o-1),u=c*l,d=c*s,f=e.getValueForPixel(e.getPixelForValue(e.min)+u),v=e.getValueForPixel(e.getPixelForValue(e.max)-d),p=v.diff(f),x=i(n,p)!=p,g=a(n,p)!=p;x||g||(m.time.min=f,m.time.max=v)}function m(e,o,t,n){var r=e.max-e.min,l=r*(o-1),m=e.isHorizontal()?t.x:t.y,s=(e.getValueForPixel(m)-e.min)/r,c=1-s,u=l*s,d=l*c;e.options.ticks.min=i(n,e.min+u),e.options.ticks.max=a(n,e.max-d)}function s(e,o,t,n){var a=_[e.options.type];a&&a(e,o,t,n)}function c(e,o,t,a,i){var r=e.chartArea;a||(a={x:(r.left+r.right)/2,y:(r.top+r.bottom)/2});var l=e.options.zoom;if(l&&y.getValueOrDefault(l.enabled,F.zoom.enabled)){var m=y.getValueOrDefault(e.options.zoom.mode,F.zoom.mode);l.sensitivity=y.getValueOrDefault(e.options.zoom.sensitivity,F.zoom.sensitivity);var c;c="xy"==m&&void 0!==i?i:"xy",y.each(e.scales,function(e,i){e.isHorizontal()&&n(m,"x")&&n(c,"x")?(l.scaleAxes="x",s(e,o,a,l)):!e.isHorizontal()&&n(m,"y")&&n(c,"y")&&(l.scaleAxes="y",s(e,t,a,l))}),e.update(0),"function"==typeof l.onZoom&&l.onZoom()}}function u(e,o,t){var n=e.chart.data.labels,r=n.length-1,l=e.minIndex,m=e.maxIndex,s=e.getValueForPixel(Math.abs(o))-e.getValueForPixel(0);o>0&&(s*=-1),l+s<0&&(s=-l),m+s>r&&(s=r-m),l+=s,m+=s,e.options.ticks.min=i(t,n[l]),e.options.ticks.max=a(t,n[m])}function d(e,o,t){var n=e.options,r=a(t,e.getValueForPixel(e.getPixelForValue(e.max)-o)),l=i(t,e.getValueForPixel(e.getPixelForValue(e.min)-o)),m=o<0?r-e.max:l-e.min;n.time.max=e.max+m,n.time.min=e.min+m}function f(e,o,t){var n,a,i=e.options.ticks,r=e.start,l=e.end;t.scaleAxes&&t.rangeMin&&!y.isNullOrUndef(t.rangeMin[t.scaleAxes])&&(n=t.rangeMin[t.scaleAxes]),t.scaleAxes&&t.rangeMax&&!y.isNullOrUndef(t.rangeMax[t.scaleAxes])&&(a=t.rangeMax[t.scaleAxes]);var m,s,c;m=e.getValueForPixel(e.getPixelForValue(r)-o),s=e.getValueForPixel(e.getPixelForValue(l)-o),m<n?(c=r-n,i.min=n,i.max=l-c):s>a?(c=a-l,i.max=a,i.min=r+c):(i.min=m,i.max=s)}function v(e,o,t){var n=M[e.options.type];n&&n(e,o,t)}function p(e,o,t){var a=e.options.pan;if(a&&y.getValueOrDefault(a.enabled,F.pan.enabled)){var i=y.getValueOrDefault(e.options.pan.mode,F.pan.mode);a.speed=y.getValueOrDefault(e.options.pan.speed,F.pan.speed),y.each(e.scales,function(e,r){e.isHorizontal()&&n(i,"x")&&0!==o?(a.scaleAxes="x",v(e,o,a)):!e.isHorizontal()&&n(i,"y")&&0!==t&&(a.scaleAxes="y",v(e,t,a))}),e.update(0),"function"==typeof a.onPan&&a.onPan()}}function x(e,o){var t=e.scales;if(void 0!==o)return t[o];for(var n in t){var a=t[n];if(a.isHorizontal())return a}}function g(e,o){var t=e.scales;if(void 0!==o)return t[o];for(var n in t){var a=t[n];if(!a.isHorizontal())return a}}var h=e("hammerjs");h="function"==typeof h?h:window.Hammer;var z=e("chart.js");z="function"==typeof z?z:window.Chart;var y=z.helpers,b=z.Zoom=z.Zoom||{},_=b.zoomFunctions=b.zoomFunctions||{},M=b.panFunctions=b.panFunctions||{},F=b.defaults={pan:{enabled:!0,mode:"xy",speed:20,threshold:10},zoom:{enabled:!0,mode:"xy",sensitivity:3,zoomStrength:30}};b.zoomFunctions.category=r,b.zoomFunctions.time=l,b.zoomFunctions.linear=m,b.zoomFunctions.logarithmic=m,b.panFunctions.category=u,b.panFunctions.time=d,b.panFunctions.linear=f,b.panFunctions.logarithmic=f,b.panCumulativeDelta=0,b.zoomCumulativeDelta=0;var H={afterInit:function(e){y.each(e.scales,function(e){e.originalOptions=y.clone(e.options)}),e.resetZoom=function(o){o=o||{},y.each(e.scales,function(e,t){var n=e.options.time||{},a=e.options.ticks||{},i=e.originalOptions.time,r=e.originalOptions.ticks;if(n&&(n.min=i.min,n.max=i.max),a&&(a.min=r.min,a.max=r.max),o[t]){var l=o[t].time||{};n.min=void 0===l.min?n?i.min:void 0:l.min,n.max=void 0===l.max?n?i.max:void 0:l.max;var m=o[t].ticks||{};a.min=void 0===m.min?a?i.min:void 0:m.min,a.max=void 0===m.max?a?i.max:void 0:m.max}}),y.each(e.data.datasets,function(e,o){e._meta=null}),e.update()},e.zoomToLimits=function(o){var t,n,r,l=e.options.zoom,m=o.x,s=o.y;void 0!==m&&(t=x(e,m.axis_id),n=void 0===m.min?t.min:m.min,r=void 0===m.max?t.max:m.max,t.options.ticks.min=i(l,n),t.options.ticks.max=a(l,r)),void 0!==s&&(t=g(e,s.axis_id),n=void 0===s.min?t.min:s.min,r=void 0===s.max?t.max:s.max,t.options.ticks.min=i(l,n),t.options.ticks.max=a(l,r)),e.update(0)}},beforeInit:function(e){e.zoom={};var o=e.zoom.node=e.chart.ctx.canvas,t=e.options,a=y.getValueOrDefault(t.pan?t.pan.threshold:void 0,b.defaults.pan.threshold);if(t.zoom&&t.zoom.enabled&&(t.zoom&&t.zoom.drag&&(e.zoom._mouseDownHandler=function(o){var n=t.pan||{};(!n.enabled||n.enabled&&2===o.button)&&(e.zoom._dragZoomStart=o)},o.addEventListener("mousedown",e.zoom._mouseDownHandler),t.pan&&t.pan.enabled&&o.addEventListener("contextmenu",function(e){e.preventDefault()}),e.zoom._mouseMoveHandler=function(o){e.zoom._dragZoomStart&&(e.zoom._dragZoomEnd=o,e.update(0))},o.addEventListener("mousemove",e.zoom._mouseMoveHandler),e.zoom._mouseUpHandler=function(o){if(e.zoom._dragZoomStart){var a=e.chartArea,i=x(e),r=g(e),l=e.zoom._dragZoomStart,m=i.left,s=i.right,u=r.top,d=r.bottom;if(n(t.zoom.mode,"x")){var f=l.target.getBoundingClientRect().left;m=Math.min(l.clientX,o.clientX)-f,s=Math.max(l.clientX,o.clientX)-f}if(n(t.zoom.mode,"y")){var v=l.target.getBoundingClientRect().top;u=Math.min(l.clientY,o.clientY)-v,d=Math.max(l.clientY,o.clientY)-v}var p=s-m,h=a.right-a.left,z=1+(h-p)/h,y=d-u,b=a.bottom-a.top,_=1+(b-y)/b;e.zoom._dragZoomStart=null,e.zoom._dragZoomEnd=null,(p>0||y>0)&&c(e,z,_,{x:p/2+m,y:y/2+u})}},o.addEventListener("mouseup",e.zoom._mouseUpHandler)),e.zoom._wheelHandler=function(o){var t=e.options.zoom;if(t.enabled){o.preventDefault();var n=o.target.getBoundingClientRect(),a=o.clientX-n.left,i=o.clientY-n.top,r={x:a,y:i},l=function(n){var a=y.getValueOrDefault(t.zoomStrength,F.zoom.zoomStrength)/1e3,i=1+a,l=1-a;o.deltaY<0?c(e,i,i,r,n):c(e,l,l,r,n)};if(t.axisHoverZoom){var m=!1,s=!1,u=e.scales;for(var d in u){var f=u[d],v=f.top,p=f.bottom,x=f.right,g=f.left;i>=v&&i<=p&&a>=g&&a<=x&&(m=!!f.isHorizontal(),s=!f.isHorizontal())}l(m?"x":s?"y":"xy")}else l("xy")}},o.addEventListener("wheel",e.zoom._wheelHandler),h)){var i=new h.Manager(o);i.add(new h.Pinch),i.add(new h.Pan({threshold:a}));var r,l=function(o){var t,n=1/r*o.scale,a=o.target.getBoundingClientRect(),i=o.center.x-a.left,l=o.center.y-a.top,m={x:i,y:l},s=Math.abs(o.pointers[0].clientX-o.pointers[1].clientX),u=Math.abs(o.pointers[0].clientY-o.pointers[1].clientY),d=s/u;t=d>.3&&d<1.7?"xy":s>u?"x":"y",c(e,n,m,t),r=o.scale};i.on("pinchstart",function(e){r=1}),i.on("pinch",l),i.on("pinchend",function(e){l(e),r=null,b.zoomCumulativeDelta=0});var m=null,s=null,u=!1,d=function(o){if(null!==m&&null!==s){u=!0;var t=o.deltaX-m,n=o.deltaY-s;m=o.deltaX,s=o.deltaY,p(e,t,n)}};i.on("panstart",function(e){m=0,s=0,d(e)}),i.on("panmove",d),i.on("panend",function(e){m=null,s=null,b.panCumulativeDelta=0,setTimeout(function(){u=!1},500)}),e.zoom._ghostClickHandler=function(e){u&&(e.stopImmediatePropagation(),e.preventDefault())},o.addEventListener("click",e.zoom._ghostClickHandler),e._mc=i}},beforeDatasetsDraw:function(e){var o=e.chart.ctx,t=e.chartArea;if(o.save(),o.beginPath(),e.zoom._dragZoomEnd){var a=x(e),i=g(e),r=e.zoom._dragZoomStart,l=e.zoom._dragZoomEnd,m=a.left,s=a.right,c=i.top,u=i.bottom;if(n(e.options.zoom.mode,"x")){var d=r.target.getBoundingClientRect().left;m=Math.min(r.clientX,l.clientX)-d,s=Math.max(r.clientX,l.clientX)-d}if(n(e.options.zoom.mode,"y")){var f=r.target.getBoundingClientRect().top;c=Math.min(r.clientY,l.clientY)-f,u=Math.max(r.clientY,l.clientY)-f}var v=s-m,p=u-c,h=e.options.zoom.drag;o.fillStyle=h.backgroundColor||"rgba(225,225,225,0.3)",o.fillRect(m,c,v,p),h.borderWidth>0&&(o.lineWidth=h.borderWidth,o.strokeStyle=h.borderColor||"rgba(225,225,225)",o.strokeRect(m,i.top,v,i.bottom-i.top))}o.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),o.clip()},afterDatasetsDraw:function(e){e.chart.ctx.restore()},destroy:function(e){if(e.zoom){var o=e.options,t=e.zoom.node;o.zoom&&o.zoom.drag?(t.removeEventListener("mousedown",e.zoom._mouseDownHandler),t.removeEventListener("mousemove",e.zoom._mouseMoveHandler),t.removeEventListener("mouseup",e.zoom._mouseUpHandler)):t.removeEventListener("wheel",e.zoom._wheelHandler),h&&t.removeEventListener("click",e.zoom._ghostClickHandler),delete e.zoom;var n=e._mc;n&&(n.remove("pinchstart"),n.remove("pinch"),n.remove("pinchend"),n.remove("panstart"),n.remove("pan"),n.remove("panend"))}}};o.exports=H,z.pluginService.register(H)},{"chart.js":1,hammerjs:1}]},{},[2]);