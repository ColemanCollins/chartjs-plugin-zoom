/*!
 * chartjs-plugin-zoom
 * http://chartjs.org/
 * Version: 0.6.3
 *
 * Copyright 2016 Evert Timberg
 * Released under the MIT license
 * https://github.com/chartjs/chartjs-plugin-zoom/blob/master/LICENSE.md
 */
!function o(e,n,t){function i(r,l){if(!n[r]){if(!e[r]){var m="function"==typeof require&&require;if(!l&&m)return m(r,!0);if(a)return a(r,!0);var s=new Error("Cannot find module '"+r+"'");throw s.code="MODULE_NOT_FOUND",s}var c=n[r]={exports:{}};e[r][0].call(c.exports,function(o){var n=e[r][1][o];return i(n?n:o)},c,c.exports,o,e,n,t)}return n[r].exports}for(var a="function"==typeof require&&require,r=0;r<t.length;r++)i(t[r]);return i}({1:[function(o,e,n){},{}],2:[function(o,e,n){function t(o,e){return void 0===o||"string"==typeof o&&o.indexOf(e)!==-1}function i(o,e){if(o.scaleAxes&&o.rangeMax&&!y.isNullOrUndef(o.rangeMax[o.scaleAxes])){var n=o.rangeMax[o.scaleAxes];e>n&&(e=n)}return e}function a(o,e){if(o.scaleAxes&&o.rangeMin&&!y.isNullOrUndef(o.rangeMin[o.scaleAxes])){var n=o.rangeMin[o.scaleAxes];e<n&&(e=n)}return e}function r(o,e,n,t){var r=o.minIndex,l=o.maxIndex,m=l-r,s=m*(e-1),c=o.isHorizontal()?n.x:n.y,u=(o.getValueForPixel(c)-r)/m,d=1-u,p=Math.round(s*u),f=Math.round(s*d),v=o.chart.data.labels;o.options.ticks.min=a(t,v[r+p]),o.options.ticks.max=i(t,v[l-f])}function l(o,e,n,t){var r,l,m=o.options;o.isHorizontal()?(r=o.right-o.left,l=(n.x-o.left)/r):(r=o.bottom-o.top,l=(n.y-o.top)/r);var s=1-l,c=r*(e-1),u=c*l,d=c*s,p=o.getValueForPixel(o.getPixelForValue(o.min)+u),f=o.getValueForPixel(o.getPixelForValue(o.max)-d),v=f.diff(p),x=a(t,v)!=v,g=i(t,v)!=v;x||g||(m.time.min=p,m.time.max=f)}function m(o,e,n,t){var r=o.max-o.min,l=r*(e-1),m=o.isHorizontal()?n.x:n.y,s=(o.getValueForPixel(m)-o.min)/r,c=1-s,u=l*s,d=l*c;o.options.ticks.min=a(t,o.min+u),o.options.ticks.max=i(t,o.max-d)}function s(o,e,n,t){var i=_[o.options.type];i&&i(o,e,n,t)}function c(o,e,n,i,a){var r=o.chartArea;i||(i={x:(r.left+r.right)/2,y:(r.top+r.bottom)/2});var l=o.options.zoom;if(l&&y.getValueOrDefault(l.enabled,F.zoom.enabled)){var m=y.getValueOrDefault(o.options.zoom.mode,F.zoom.mode);l.sensitivity=y.getValueOrDefault(o.options.zoom.sensitivity,F.zoom.sensitivity);var c;c="xy"==m&&void 0!==a?a:"xy",y.each(o.scales,function(o,a){o.isHorizontal()&&t(m,"x")&&t(c,"x")?(l.scaleAxes="x",s(o,e,i,l)):!o.isHorizontal()&&t(m,"y")&&t(c,"y")&&(l.scaleAxes="y",s(o,n,i,l))}),o.update(0),"function"==typeof l.onZoom&&l.onZoom()}}function u(o,e,n){var t=o.chart.data.labels,r=t.length-1,l=o.minIndex,m=o.maxIndex,s=o.getValueForPixel(Math.abs(e))-o.getValueForPixel(0);e>0&&(s*=-1),l+s<0&&(s=-l),m+s>r&&(s=r-m),l+=s,m+=s,o.options.ticks.min=a(n,t[l]),o.options.ticks.max=i(n,t[m])}function d(o,e,n){var t=o.options,r=i(n,o.getValueForPixel(o.getPixelForValue(o.max)-e)),l=a(n,o.getValueForPixel(o.getPixelForValue(o.min)-e)),m=e<0?r-o.max:l-o.min;t.time.max=o.max+m,t.time.min=o.min+m}function p(o,e,n){var t,i,a=o.options.ticks,r=o.start,l=o.end;n.scaleAxes&&n.rangeMin&&!y.isNullOrUndef(n.rangeMin[n.scaleAxes])&&(t=n.rangeMin[n.scaleAxes]),n.scaleAxes&&n.rangeMax&&!y.isNullOrUndef(n.rangeMax[n.scaleAxes])&&(i=n.rangeMax[n.scaleAxes]);var m,s,c;m=o.getValueForPixel(o.getPixelForValue(r)-e),s=o.getValueForPixel(o.getPixelForValue(l)-e),m<t?(c=r-t,a.min=t,a.max=l-c):s>i?(c=i-l,a.max=i,a.min=r+c):(a.min=m,a.max=s)}function f(o,e,n){var t=M[o.options.type];t&&t(o,e,n)}function v(o,e,n){var i=o.options.pan;if(i&&y.getValueOrDefault(i.enabled,F.pan.enabled)){var a=y.getValueOrDefault(o.options.pan.mode,F.pan.mode);i.speed=y.getValueOrDefault(o.options.pan.speed,F.pan.speed),y.each(o.scales,function(o,r){o.isHorizontal()&&t(a,"x")&&0!==e?(i.scaleAxes="x",f(o,e,i)):!o.isHorizontal()&&t(a,"y")&&0!==n&&(i.scaleAxes="y",f(o,n,i))}),o.update(0),"function"==typeof i.onPan&&i.onPan()}}function x(o,e){var n=o.scales;if(void 0!==e)return n[e];for(var t in n){var i=n[t];if(i.isHorizontal())return i}}function g(o,e){var n=o.scales;if(void 0!==e)return n[e];for(var t in n){var i=n[t];if(!i.isHorizontal())return i}}var z=o("hammerjs");z="function"==typeof z?z:window.Hammer;var h=o("chart.js");h="function"==typeof h?h:window.Chart;var y=h.helpers,b=h.Zoom=h.Zoom||{},_=b.zoomFunctions=b.zoomFunctions||{},M=b.panFunctions=b.panFunctions||{},F=b.defaults={pan:{enabled:!0,mode:"xy",speed:20,threshold:10},zoom:{enabled:!0,mode:"xy",sensitivity:3,zoomStrength:30}};b.zoomFunctions.category=r,b.zoomFunctions.time=l,b.zoomFunctions.linear=m,b.zoomFunctions.logarithmic=m,b.panFunctions.category=u,b.panFunctions.time=d,b.panFunctions.linear=p,b.panFunctions.logarithmic=p,b.panCumulativeDelta=0,b.zoomCumulativeDelta=0;var H={afterInit:function(o){y.each(o.scales,function(o){o.originalOptions=y.clone(o.options)}),o.resetZoom=function(e){e=e||{},y.each(o.scales,function(o,n){var t=o.options.time||{},i=o.options.ticks||{},a=o.originalOptions.time,r=o.originalOptions.ticks;if(t&&(t.min=a.min,t.max=a.max),i&&(i.min=r.min,i.max=r.max),e[n]){var l=e[n].time||{};t.min=void 0===l.min?t?a.min:void 0:l.min,t.max=void 0===l.max?t?a.max:void 0:l.max;var m=e[n].ticks||{};i.min=void 0===m.min?i?a.min:void 0:m.min,i.max=void 0===m.max?i?a.max:void 0:m.max}}),y.each(o.data.datasets,function(o,e){o._meta=null}),o.update()},o.zoomToLimits=function(e){var n,t,r,l=o.options.zoom,m=e.x,s=e.y;void 0!==m&&(n=x(o,m.axis_id),t=void 0===m.min?n.min:m.min,r=void 0===m.max?n.max:m.max,n.options.ticks.min=a(l,t),n.options.ticks.max=i(l,r)),void 0!==s&&(n=g(o,s.axis_id),t=void 0===s.min?n.min:s.min,r=void 0===s.max?n.max:s.max,n.options.ticks.min=a(l,t),n.options.ticks.max=i(l,r)),o.update(0)}},beforeInit:function(o){o.zoom={};var e=o.zoom.node=o.chart.ctx.canvas,n=o.options,i=y.getValueOrDefault(n.pan?n.pan.threshold:void 0,b.defaults.pan.threshold);if(n.zoom&&n.zoom.enabled&&(n.zoom&&n.zoom.drag&&(o.zoom._mouseDownHandler=function(e){(o.options.pan||{}).enabled&&2===e.button&&(o.zoom._dragZoomStart=e)},e.addEventListener("mousedown",o.zoom._mouseDownHandler),n.pan&&n.pan.enabled&&e.addEventListener("contextmenu",function(e){(o.options.pan||{}).enabled&&e.preventDefault()}),o.zoom._mouseMoveHandler=function(e){o.zoom._dragZoomStart&&(o.zoom._dragZoomEnd=e,o.update(0))},e.addEventListener("mousemove",o.zoom._mouseMoveHandler),o.zoom._mouseUpHandler=function(e){if(o.zoom._dragZoomStart){var i=o.chartArea,a=x(o),r=g(o),l=o.zoom._dragZoomStart,m=a.left,s=a.right,u=r.top,d=r.bottom;if(t(n.zoom.mode,"x")){var p=l.target.getBoundingClientRect().left;m=Math.min(l.clientX,e.clientX)-p,s=Math.max(l.clientX,e.clientX)-p}if(t(n.zoom.mode,"y")){var f=l.target.getBoundingClientRect().top;u=Math.min(l.clientY,e.clientY)-f,d=Math.max(l.clientY,e.clientY)-f}var v=s-m,z=i.right-i.left,h=1+(z-v)/z,y=d-u,b=i.bottom-i.top,_=1+(b-y)/b;o.zoom._dragZoomStart=null,o.zoom._dragZoomEnd=null,(v>0||y>0)&&c(o,h,_,{x:v/2+m,y:y/2+u})}},e.addEventListener("mouseup",o.zoom._mouseUpHandler)),o.zoom._wheelHandler=function(e){var n=o.options.zoom;if(n.enabled){e.preventDefault();var t=e.target.getBoundingClientRect(),i=e.clientX-t.left,a=e.clientY-t.top,r={x:i,y:a},l=function(t){var i=y.getValueOrDefault(n.zoomStrength,F.zoom.zoomStrength)/1e3,a=1+i,l=1-i;e.deltaY<0?c(o,a,a,r,t):c(o,l,l,r,t)};if(n.axisHoverZoom){var m=!1,s=!1,u=o.scales;for(var d in u){var p=u[d],f=p.top,v=p.bottom,x=p.right,g=p.left;a>=f&&a<=v&&i>=g&&i<=x&&(m=!!p.isHorizontal(),s=!p.isHorizontal())}l(m?"x":s?"y":"xy")}else l("xy")}},e.addEventListener("wheel",o.zoom._wheelHandler),z)){var a=new z.Manager(e);a.add(new z.Pinch),a.add(new z.Pan({threshold:i}));var r,l=function(e){var n,t=1/r*e.scale,i=e.target.getBoundingClientRect(),a=e.center.x-i.left,l=e.center.y-i.top,m={x:a,y:l},s=Math.abs(e.pointers[0].clientX-e.pointers[1].clientX),u=Math.abs(e.pointers[0].clientY-e.pointers[1].clientY),d=s/u;n=d>.3&&d<1.7?"xy":s>u?"x":"y",c(o,t,m,n),r=e.scale};a.on("pinchstart",function(o){r=1}),a.on("pinch",l),a.on("pinchend",function(o){l(o),r=null,b.zoomCumulativeDelta=0});var m=null,s=null,u=!1,d=function(e){if(null!==m&&null!==s){u=!0;var n=e.deltaX-m,t=e.deltaY-s;m=e.deltaX,s=e.deltaY,v(o,n,t)}};a.on("panstart",function(o){m=0,s=0,d(o)}),a.on("panmove",d),a.on("panend",function(o){m=null,s=null,b.panCumulativeDelta=0,setTimeout(function(){u=!1},500)}),o.zoom._ghostClickHandler=function(o){u&&(o.stopImmediatePropagation(),o.preventDefault())},e.addEventListener("click",o.zoom._ghostClickHandler),o._mc=a}},beforeDatasetsDraw:function(o){if(o.options.zoom&&o.options.zoom.enabled){var e=o.chart.ctx,n=o.chartArea;if(e.save(),e.beginPath(),o.zoom._dragZoomEnd){var i=x(o),a=g(o),r=o.zoom._dragZoomStart,l=o.zoom._dragZoomEnd,m=i.left,s=i.right,c=a.top,u=a.bottom;if(t(o.options.zoom.mode,"x")){var d=r.target.getBoundingClientRect().left;m=Math.min(r.clientX,l.clientX)-d,s=Math.max(r.clientX,l.clientX)-d}if(t(o.options.zoom.mode,"y")){var p=r.target.getBoundingClientRect().top;c=Math.min(r.clientY,l.clientY)-p,u=Math.max(r.clientY,l.clientY)-p}var f=s-m,v=u-c,z=o.options.zoom.drag;e.fillStyle=z.backgroundColor||"rgba(225,225,225,0.3)",e.fillRect(m,c,f,v),z.borderWidth>0&&(e.lineWidth=z.borderWidth,e.strokeStyle=z.borderColor||"rgba(225,225,225)",e.strokeRect(m,a.top,f,a.bottom-a.top))}e.rect(n.left,n.top,n.right-n.left,n.bottom-n.top),e.clip()}},afterDatasetsDraw:function(o){o.options.zoom&&o.options.zoom.enabled&&o.chart.ctx.restore()},destroy:function(o){if(o.zoom){var e=o.options,n=o.zoom.node;e.zoom&&e.zoom.drag?(n.removeEventListener("mousedown",o.zoom._mouseDownHandler),n.removeEventListener("mousemove",o.zoom._mouseMoveHandler),n.removeEventListener("mouseup",o.zoom._mouseUpHandler)):n.removeEventListener("wheel",o.zoom._wheelHandler),z&&n.removeEventListener("click",o.zoom._ghostClickHandler),delete o.zoom;var t=o._mc;t&&(t.remove("pinchstart"),t.remove("pinch"),t.remove("pinchend"),t.remove("panstart"),t.remove("pan"),t.remove("panend"))}}};e.exports=H,h.pluginService.register(H)},{"chart.js":1,hammerjs:1}]},{},[2]);