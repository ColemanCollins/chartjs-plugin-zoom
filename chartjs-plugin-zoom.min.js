/*!
 * chartjs-plugin-zoom
 * http://chartjs.org/
 * Version: 0.6.3
 *
 * Copyright 2016 Evert Timberg
 * Released under the MIT license
 * https://github.com/chartjs/chartjs-plugin-zoom/blob/master/LICENSE.md
 */
!function o(e,t,n){function a(r,l){if(!t[r]){if(!e[r]){var m="function"==typeof require&&require;if(!l&&m)return m(r,!0);if(i)return i(r,!0);var s=new Error("Cannot find module '"+r+"'");throw s.code="MODULE_NOT_FOUND",s}var c=t[r]={exports:{}};e[r][0].call(c.exports,function(o){var t=e[r][1][o];return a(t?t:o)},c,c.exports,o,e,t,n)}return t[r].exports}for(var i="function"==typeof require&&require,r=0;r<n.length;r++)a(n[r]);return a}({1:[function(o,e,t){},{}],2:[function(o,e,t){function n(o,e){return void 0===o||"string"==typeof o&&o.indexOf(e)!==-1}function a(o,e){if(o.scaleAxes&&o.rangeMax&&!y.isNullOrUndef(o.rangeMax[o.scaleAxes])){var t=o.rangeMax[o.scaleAxes];e>t&&(e=t)}return e}function i(o,e){if(o.scaleAxes&&o.rangeMin&&!y.isNullOrUndef(o.rangeMin[o.scaleAxes])){var t=o.rangeMin[o.scaleAxes];e<t&&(e=t)}return e}function r(o,e,t,n){var r=o.minIndex,l=o.maxIndex,m=l-r,s=m*(e-1),c=o.isHorizontal()?t.x:t.y,u=(o.getValueForPixel(c)-r)/m,d=1-u,f=Math.round(s*u),p=Math.round(s*d),v=o.chart.data.labels;o.options.ticks.min=i(n,v[r+f]),o.options.ticks.max=a(n,v[l-p])}function l(o,e,t,n){var r,l,m=o.options;o.isHorizontal()?(r=o.right-o.left,l=(t.x-o.left)/r):(r=o.bottom-o.top,l=(t.y-o.top)/r);var s=1-l,c=r*(e-1),u=c*l,d=c*s,f=o.getValueForPixel(o.getPixelForValue(o.min)+u),p=o.getValueForPixel(o.getPixelForValue(o.max)-d),v=p.diff(f),x=i(n,v)!=v,g=a(n,v)!=v;x||g||(m.time.min=f,m.time.max=p)}function m(o,e,t,n){var r=o.max-o.min,l=r*(e-1),m=o.isHorizontal()?t.x:t.y,s=(o.getValueForPixel(m)-o.min)/r,c=1-s,u=l*s,d=l*c;o.options.ticks.min=i(n,o.min+u),o.options.ticks.max=a(n,o.max-d)}function s(o,e,t,n){var a=_[o.options.type];a&&a(o,e,t,n)}function c(o,e,t,a,i){var r=o.chartArea;a||(a={x:(r.left+r.right)/2,y:(r.top+r.bottom)/2});var l=o.options.zoom;if(l&&y.getValueOrDefault(l.enabled,F.zoom.enabled)){var m=y.getValueOrDefault(o.options.zoom.mode,F.zoom.mode);l.sensitivity=y.getValueOrDefault(o.options.zoom.sensitivity,F.zoom.sensitivity);var c;c="xy"==m&&void 0!==i?i:"xy",y.each(o.scales,function(o,i){o.isHorizontal()&&n(m,"x")&&n(c,"x")?(l.scaleAxes="x",s(o,e,a,l)):!o.isHorizontal()&&n(m,"y")&&n(c,"y")&&(l.scaleAxes="y",s(o,t,a,l))}),o.update(0),"function"==typeof l.onZoom&&l.onZoom()}}function u(o,e,t){var n=o.chart.data.labels,r=n.length-1,l=o.minIndex,m=o.maxIndex,s=o.getValueForPixel(Math.abs(e))-o.getValueForPixel(0);e>0&&(s*=-1),l+s<0&&(s=-l),m+s>r&&(s=r-m),l+=s,m+=s,o.options.ticks.min=i(t,n[l]),o.options.ticks.max=a(t,n[m])}function d(o,e,t){var n=o.options,r=a(t,o.getValueForPixel(o.getPixelForValue(o.max)-e)),l=i(t,o.getValueForPixel(o.getPixelForValue(o.min)-e)),m=e<0?r-o.max:l-o.min;n.time.max=o.max+m,n.time.min=o.min+m}function f(o,e,t){var n,a,i=o.options.ticks,r=o.start,l=o.end;t.scaleAxes&&t.rangeMin&&!y.isNullOrUndef(t.rangeMin[t.scaleAxes])&&(n=t.rangeMin[t.scaleAxes]),t.scaleAxes&&t.rangeMax&&!y.isNullOrUndef(t.rangeMax[t.scaleAxes])&&(a=t.rangeMax[t.scaleAxes]);var m,s,c;m=o.getValueForPixel(o.getPixelForValue(r)-e),s=o.getValueForPixel(o.getPixelForValue(l)-e),m<n?(c=r-n,i.min=n,i.max=l-c):s>a?(c=a-l,i.max=a,i.min=r+c):(i.min=m,i.max=s)}function p(o,e,t){var n=M[o.options.type];n&&n(o,e,t)}function v(o,e,t){var a=o.options.pan;if(a&&y.getValueOrDefault(a.enabled,F.pan.enabled)){var i=y.getValueOrDefault(o.options.pan.mode,F.pan.mode);a.speed=y.getValueOrDefault(o.options.pan.speed,F.pan.speed),y.each(o.scales,function(o,r){o.isHorizontal()&&n(i,"x")&&0!==e?(a.scaleAxes="x",p(o,e,a)):!o.isHorizontal()&&n(i,"y")&&0!==t&&(a.scaleAxes="y",p(o,t,a))}),o.update(0),"function"==typeof a.onPan&&a.onPan()}}function x(o,e){var t=o.scales;if(void 0!==e)return t[e];for(var n in t){var a=t[n];if(a.isHorizontal())return a}}function g(o,e){var t=o.scales;if(void 0!==e)return t[e];for(var n in t){var a=t[n];if(!a.isHorizontal())return a}}var h=o("hammerjs");h="function"==typeof h?h:window.Hammer;var z=o("chart.js");z="function"==typeof z?z:window.Chart;var y=z.helpers,b=z.Zoom=z.Zoom||{},_=b.zoomFunctions=b.zoomFunctions||{},M=b.panFunctions=b.panFunctions||{},F=b.defaults={pan:{enabled:!0,mode:"xy",speed:20,threshold:10},zoom:{enabled:!0,mode:"xy",sensitivity:3,zoomStrength:30}};b.zoomFunctions.category=r,b.zoomFunctions.time=l,b.zoomFunctions.linear=m,b.zoomFunctions.logarithmic=m,b.panFunctions.category=u,b.panFunctions.time=d,b.panFunctions.linear=f,b.panFunctions.logarithmic=f,b.panCumulativeDelta=0,b.zoomCumulativeDelta=0;var H={afterInit:function(o){y.each(o.scales,function(o){o.originalOptions=y.clone(o.options)}),o.resetZoom=function(e){e=e||{},y.each(o.scales,function(o,t){var n=o.options.time||{},a=o.options.ticks||{},i=o.originalOptions.time,r=o.originalOptions.ticks;if(n&&(n.min=i.min,n.max=i.max),a&&(a.min=r.min,a.max=r.max),e[t]){var l=e[t].time||{};n.min=void 0===l.min?n?i.min:void 0:l.min,n.max=void 0===l.max?n?i.max:void 0:l.max;var m=e[t].ticks||{};a.min=void 0===m.min?a?i.min:void 0:m.min,a.max=void 0===m.max?a?i.max:void 0:m.max}}),y.each(o.data.datasets,function(o,e){o._meta=null}),o.update()},o.zoomToLimits=function(e){var t,n,r,l=o.options.zoom,m=e.x,s=e.y;void 0!==m&&(t=x(o,m.axis_id),n=void 0===m.min?t.min:m.min,r=void 0===m.max?t.max:m.max,t.options.ticks.min=i(l,n),t.options.ticks.max=a(l,r)),void 0!==s&&(t=g(o,s.axis_id),n=void 0===s.min?t.min:s.min,r=void 0===s.max?t.max:s.max,t.options.ticks.min=i(l,n),t.options.ticks.max=a(l,r)),o.update(0)}},beforeInit:function(o){o.zoom={};var e=o.zoom.node=o.chart.ctx.canvas,t=o.options,a=y.getValueOrDefault(t.pan?t.pan.threshold:void 0,b.defaults.pan.threshold);if(t.zoom&&t.zoom.enabled&&(t.zoom&&t.zoom.drag&&(o.zoom._mouseDownHandler=function(e){var n=t.pan||{};(!n.enabled||n.enabled&&2===e.button)&&(o.zoom._dragZoomStart=e)},e.addEventListener("mousedown",o.zoom._mouseDownHandler),t.pan&&t.pan.enabled&&e.addEventListener("contextmenu",function(o){o.preventDefault()}),o.zoom._mouseMoveHandler=function(e){o.zoom._dragZoomStart&&(o.zoom._dragZoomEnd=e,o.update(0))},e.addEventListener("mousemove",o.zoom._mouseMoveHandler),o.zoom._mouseUpHandler=function(e){if(o.zoom._dragZoomStart){var a=o.chartArea,i=x(o),r=g(o),l=o.zoom._dragZoomStart,m=i.left,s=i.right,u=r.top,d=r.bottom;if(n(t.zoom.mode,"x")){var f=l.target.getBoundingClientRect().left;m=Math.min(l.clientX,e.clientX)-f,s=Math.max(l.clientX,e.clientX)-f}if(n(t.zoom.mode,"y")){var p=l.target.getBoundingClientRect().top;u=Math.min(l.clientY,e.clientY)-p,d=Math.max(l.clientY,e.clientY)-p}var v=s-m,h=a.right-a.left,z=1+(h-v)/h,y=d-u,b=a.bottom-a.top,_=1+(b-y)/b;o.zoom._dragZoomStart=null,o.zoom._dragZoomEnd=null,(v>0||y>0)&&c(o,z,_,{x:v/2+m,y:y/2+u})}},e.addEventListener("mouseup",o.zoom._mouseUpHandler)),o.zoom._wheelHandler=function(e){var t=o.options.zoom,n=e.target.getBoundingClientRect(),a=e.clientX-n.left,i=e.clientY-n.top,r={x:a,y:i},l=function(n){var a=y.getValueOrDefault(t.zoomStrength,F.zoom.zoomStrength)/1e3,i=1+a,l=1-a;e.deltaY<0?c(o,i,i,r,n):c(o,l,l,r,n)};if(t.axisHoverZoom){var m=!1,s=!1,u=o.scales;for(var d in u){var f=u[d],p=f.top,v=f.bottom,x=f.right,g=f.left;i>=p&&i<=v&&a>=g&&a<=x&&(m=!!f.isHorizontal(),s=!f.isHorizontal())}l(m?"x":s?"y":"xy")}else l("xy");e.preventDefault()},e.addEventListener("wheel",o.zoom._wheelHandler),h)){var i=new h.Manager(e);i.add(new h.Pinch),i.add(new h.Pan({threshold:a}));var r,l=function(e){var t,n=1/r*e.scale,a=e.target.getBoundingClientRect(),i=e.center.x-a.left,l=e.center.y-a.top,m={x:i,y:l},s=Math.abs(e.pointers[0].clientX-e.pointers[1].clientX),u=Math.abs(e.pointers[0].clientY-e.pointers[1].clientY),d=s/u;t=d>.3&&d<1.7?"xy":s>u?"x":"y",c(o,n,m,t),r=e.scale};i.on("pinchstart",function(o){r=1}),i.on("pinch",l),i.on("pinchend",function(o){l(o),r=null,b.zoomCumulativeDelta=0});var m=null,s=null,u=!1,d=function(e){if(null!==m&&null!==s){u=!0;var t=e.deltaX-m,n=e.deltaY-s;m=e.deltaX,s=e.deltaY,v(o,t,n)}};i.on("panstart",function(o){m=0,s=0,d(o)}),i.on("panmove",d),i.on("panend",function(o){m=null,s=null,b.panCumulativeDelta=0,setTimeout(function(){u=!1},500)}),o.zoom._ghostClickHandler=function(o){u&&(o.stopImmediatePropagation(),o.preventDefault())},e.addEventListener("click",o.zoom._ghostClickHandler),o._mc=i}},beforeDatasetsDraw:function(o){var e=o.chart.ctx,t=o.chartArea;if(e.save(),e.beginPath(),o.zoom._dragZoomEnd){var a=x(o),i=g(o),r=o.zoom._dragZoomStart,l=o.zoom._dragZoomEnd,m=a.left,s=a.right,c=i.top,u=i.bottom;if(n(o.options.zoom.mode,"x")){var d=r.target.getBoundingClientRect().left;m=Math.min(r.clientX,l.clientX)-d,s=Math.max(r.clientX,l.clientX)-d}if(n(o.options.zoom.mode,"y")){var f=r.target.getBoundingClientRect().top;c=Math.min(r.clientY,l.clientY)-f,u=Math.max(r.clientY,l.clientY)-f}var p=s-m,v=u-c,h=o.options.zoom.drag;e.fillStyle=h.backgroundColor||"rgba(225,225,225,0.3)",e.fillRect(m,c,p,v),h.borderWidth>0&&(e.lineWidth=h.borderWidth,e.strokeStyle=h.borderColor||"rgba(225,225,225)",e.strokeRect(m,i.top,p,i.bottom-i.top))}e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()},afterDatasetsDraw:function(o){o.chart.ctx.restore()},destroy:function(o){if(o.zoom){var e=o.options,t=o.zoom.node;e.zoom&&e.zoom.drag?(t.removeEventListener("mousedown",o.zoom._mouseDownHandler),t.removeEventListener("mousemove",o.zoom._mouseMoveHandler),t.removeEventListener("mouseup",o.zoom._mouseUpHandler)):t.removeEventListener("wheel",o.zoom._wheelHandler),h&&t.removeEventListener("click",o.zoom._ghostClickHandler),delete o.zoom;var n=o._mc;n&&(n.remove("pinchstart"),n.remove("pinch"),n.remove("pinchend"),n.remove("panstart"),n.remove("pan"),n.remove("panend"))}}};e.exports=H,z.pluginService.register(H)},{"chart.js":1,hammerjs:1}]},{},[2]);